<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>lio-mern</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/stylesheets/profile.css" />
  </head>
  <body>



    <div id="nav" class="div fixed-top container my-4 navb">
      <div class="menu pt-3">
        <a href="/feed" class="logo"><h4>LIOmern</h4></a>
        <ul>
          <a href="/feed  "><li>feed</li></a>
          <a href="/yourposts"><li> your posts</li></a>
          <a href="/profile"><li>profile</li></a>
        </ul>
        <a href="/signup" class="btn logou">logout</a>
        <div onclick="hello()" class="m-bt py-3">Menu</div>
      </div>
    </div>
    <hr />
    <h1 class="my-5 mx-5">
      Hey <b class="fullnme"><%= user.fullname%>....</b>
    </h1>

    <hr />
    <h1 class="perinfo text-center my-3">Here is your profile section:</h1>
    <div class="section  my-4">
      <header class="container my-5">
        <h2 class="my-4 personal">Your personal information:</h2>
        <div class="info p-3">
          <div id="imgdiv" class="img dp my-4">
            <img src="/images/dp/<%= user.dp %>" alt="" />
          </div>
          <div class="desc">
            <h4 class="my-2">
              <span class="ques mx-4 mt-3">Full name: </span> <span class="ans"><%= user.fullname %></span>
            </h4>
            <h5 class="my-2">
              <span class="ques mx-4 mt-3"> Username: </span> <span class="ans">@<%= user.username %></span>
            </h5>
            <h6 class="mt-5"> 
              <span class="ques mx-4 ">About: </span>
              <span class="abouttext ans" id="abouttext"></span>
            </h6>
          </div>
        </div>
        <h3 class="accset my-5"><a href="/accountsettings">Edit Your Profile...?</a></h3>
      </header>

      <section class="p-3 sec-cont my-5">
        <h1 class="rechd my-3"> your recently posts:</h1>
        <h6 class="newp my-3"><a  href="/accountsettings"> want to post something new.....?</a></h6>
        <div class="cards py-3 my-5">
          <% const reversedPosts = user.posts.slice().reverse(); // Reverse the order of posts %>
          
          <% if (reversedPosts.length === 0) { %>
            <div class="nope my-5">
              <p>Currently you post nothing.</p>
              <br />
              <a href="/accountsettings">Want to post something.....?</a>
            </div>
          <% } else { %>
            <% for (let i = 0; i < Math.min(reversedPosts.length, 3); i++) { // Display only the most recent 3 posts %>
              <div class="card my-2" style="width: 18rem">
                <img src="/images/uploads/<%= reversedPosts[i].image %>" class="card-img-top" alt="...">
                <div class="card-body">
                  <p class="card-text"><%= reversedPosts[i].posttext %></p>
                </div>
              </div>
            <% } %>
          <% } %>
        </div>
      </section>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script>



      function updateProfileAbout() {
        const aboutValue = localStorage.getItem("aboutValue");
    
        console.log("Retrieved aboutValue from localStorage:", aboutValue);
    
        document.getElementById("abouttext").innerHTML = `"${aboutValue}"`;
      }
    
      window.addEventListener("load", updateProfileAbout);
    </script>
    <script src="/javascripts/demo.js"></script>
  </body>
</html>
